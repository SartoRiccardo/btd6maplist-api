DiscordID:
  type: string
  description: an user's Discord ID. Is numeric.

MaplistFormat:
  type: int
  enum: [0, 1, 2]
  description: >
    The format a run was played in.\n
    * `0` - All formats.\n
    * `1` - Maplist ~ current version.\n
    * `2` - Maplist ~ all versions.

ExpertDifficulty:
  type: int
  enum: [-1, 0, 1, 2, 3]
  description: >
    The Expert difficulty. If none, it's set to `-1`.\n
    * `0` - Casual Expert.\n
    * `1` - Medium Expert.\n
    * `2` - Hard Expert.\n
    * `3` - True Expert.

MapVersionCompatibility:
  type: int
  enum: [0, 1, 2, 3]
  description: >
    A map's compatibility status with a game version.\n
    * `0` - No gameplay changes.\n
    * `1` - Only visual changes.\n
    * `2` - Playable, but not recommended.\n
    * `3` - Unplayable and/or has gameplay differences.

PartialListMap:
  type: object
  properties:
    name:
      type: string
      description: The map's name.
    code:
      type: string
      description: The map's code.
    placement:
      type: integer
      description: The map's placement in the list (starts from 1).
    verified:
      type: boolean
      description: "`true` if the map was verified in the current update."



PartialMap:
  type: object
  properties:
    name:
      type: string
      description: The map's name.
    code:
      type: string
      description: The map's code.
    placement_cur:
      type: integer
      description: The map's placement in the list ~ current version (starts from 1). If none, it's set to `-1`.
    placement_all:
      type: integer
      description: The map's placement in the list ~ all versions (starts from 1). If none, it's set to `-1`.
    difficulty:
      $ref: "#/components/schemas/ExpertDifficulty"
    r6_start:
      type: string
      nullable: true
      description: URL to how to start Round 6.
    map_data:
      type: string
      nullable: true
      description: URL to the map data.

ListCompletion:
  type: object
  properties:
    map:
      type: string
      description: The code of the map that was completed
    user_id:
      type: string
      description: The user's Discord ID.
    black_border:
      type: boolean
      description: "`true` if the run was black bordered."
    no_geraldo:
      type: boolean
      description: "`true` if the run did not use Geraldo."
    current_lcc:
      type: boolean
      description: "`true` if the run is the current LCC for the map."
    formats:
      type: array
      items:
        $ref: "#/components/schemas/MaplistFormat"
      description: A list of Maplist formats this run was valid in.

ListCompletionWithMap:
  allOf:
    - $ref: "#/components/schemas/ListCompletion"
    - type: object
      properties:
        map:
          $ref: "#/components/schemas/PartialMap"

PartialUser:
  type: object
  properties:
    id:
      type: string
      description: The user's Discord ID.
    name:
      type: string
      description: The user's name.

Profile:
  allOf:
    - $ref: "#/components/schemas/PartialUser"
    - type: object
      properties:
        oak:
          type: string
          nullable: true
          description: The user's NinjaKiwi OpenData Access Key

MaplistProfile:
  type: object
  properties:
    points:
      type: integer
      description: Points on the leaderboard.
    pts_placement:
      type: integer
      nullable: true
      description: Placement on the points leaderboard.
    lccs:
      type: integer
      description: Number of current LCCs.
    lccs_placement:
      type: integer
      nullable: true
      description: Placement on the LCC leaderboard.

User:
  allOf:
    - $ref: "#/components/schemas/PartialUser"
    - type: object
      properties:
        maplist_cur:
          $ref: "#/components/schemas/MaplistProfile"
        maplist_all:
          $ref: "#/components/schemas/MaplistProfile"
        created_maps:
          type: array
          items:
            $ref: "#/components/schemas/PartialMap"

LCC:
  type: object
  properties:
    id:
      type: integer
      description: The unique ID of the run.
    leftover:
      type: integer
      description: >
        The amount of cash saved at the end. Since Least Cash rules can't be
        applied to custom maps, saveup is tracked instead of cash spent.
    proof:
      type: string
      description: >
        An URL which links to an image or a video proof of the run being beaten with
        the correct saveup
    format:
      $ref: "#/components/schemas/MaplistFormat"
    players:
      type: array
      items:
        $ref: "#/components/schemas/DiscordID"
      description: The players who took part in the run. Oftentimes it's a single item.

Map:
  allOf:
    - $ref: "#/components/schemas/PartialMap"
    - type: object
      properties:
        creators:
          type: array
          items:
            type: object
            properties:
              id:
                $ref: "#/components/schemas/DiscordID"
              role:
                type: string
                nullable: true
                description: The contributions the user had in the map's creation
          description: The map's creators
        additional_codes:
          type: array
          items:
            type: object
            properties:
              code:
                type: string
                description: The map's code.
              description:
                type: string
                nullable: true
                description: What this map has different from the original
          description: Additional codes for the map, if any.
        verifications:
          type: array
          items:
            type: object
            properties:
              verifier:
                $ref: "#/components/schemas/DiscordID"
              version:
                type: number
                nullable: true
                description: >
                  The version the map was verified in.
                  If it's the first verification, it's set to `null`.
          description: The users who verified the map
        verified:
          type: boolean
          description: "`true` if the map was verified in the current update."
        lccs:
          $ref: "#/components/schemas/LCC"
        map_data_compatibility:
          type: array
          items:
            type: object
            properties:
              status:
                $ref: "#/components/schemas/MapVersionCompatibility"
              version:
                type: number
                description: The version since this compatibility status came into effect.
          description: >
            Changelog of compatibilities with previous versions.
            It always implicitely starts at v39.0 with it being unavailable.
            
LeaderboardEntry:
  type: object
  properties:
    user_id:
      $ref: "#/components/schemas/DiscordID"
    score:
      type: number
      description: The user's score
    position:
      type: integer
      description: Position on the list.

PartialExpertMap:
  type: object
  properties:
    name:
      type: string
      description: The name of the map.
    code:
      type: string
      description: The code of the map.
    difficulty:
      $ref: "#/components/schemas/ExpertDifficulty"

ConfigVar:
  type: object
  properties:
    name:
      type: string
      description: The name of the variable
    value:
      description: The value of the variable. Can be of any type.